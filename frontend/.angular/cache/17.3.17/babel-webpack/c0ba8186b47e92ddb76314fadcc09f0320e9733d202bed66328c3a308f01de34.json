{"ast":null,"code":"import { inject } from '@angular/core';\nimport { CommonModule } from '@angular/common';\nimport { AdminService } from '../../services/admin.service';\nimport * as i0 from \"@angular/core\";\nimport * as i1 from \"@angular/common\";\nfunction AdminDashboardComponent_div_8_Template(rf, ctx) {\n  if (rf & 1) {\n    const _r1 = i0.ɵɵgetCurrentView();\n    i0.ɵɵelementStart(0, \"div\", 3)(1, \"p\")(2, \"strong\");\n    i0.ɵɵtext(3, \"Reserva:\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵtext(4);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(5, \"p\")(6, \"strong\");\n    i0.ɵɵtext(7, \"Local:\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵtext(8);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(9, \"p\")(10, \"strong\");\n    i0.ɵɵtext(11, \"Usuario:\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵtext(12);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(13, \"p\")(14, \"strong\");\n    i0.ɵɵtext(15, \"Inicio:\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵtext(16);\n    i0.ɵɵpipe(17, \"date\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(18, \"p\")(19, \"strong\");\n    i0.ɵɵtext(20, \"Fin:\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵtext(21);\n    i0.ɵɵpipe(22, \"date\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(23, \"p\")(24, \"strong\");\n    i0.ɵɵtext(25, \"Motivo:\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵtext(26);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(27, \"label\");\n    i0.ɵɵtext(28, \" Prioridad (1=alta, 9=baja): \");\n    i0.ɵɵelement(29, \"input\", 4, 0);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(31, \"div\", 5)(32, \"button\", 1);\n    i0.ɵɵlistener(\"click\", function AdminDashboardComponent_div_8_Template_button_click_32_listener() {\n      const c_r2 = i0.ɵɵrestoreView(_r1).$implicit;\n      const prio_r3 = i0.ɵɵreference(30);\n      const ctx_r3 = i0.ɵɵnextContext();\n      return i0.ɵɵresetView(ctx_r3.resolve(c_r2.id, prio_r3.value, \"approved\"));\n    });\n    i0.ɵɵtext(33, \"Aprobar\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(34, \"button\", 1);\n    i0.ɵɵlistener(\"click\", function AdminDashboardComponent_div_8_Template_button_click_34_listener() {\n      const c_r2 = i0.ɵɵrestoreView(_r1).$implicit;\n      const prio_r3 = i0.ɵɵreference(30);\n      const ctx_r3 = i0.ɵɵnextContext();\n      return i0.ɵɵresetView(ctx_r3.resolve(c_r2.id, prio_r3.value, \"rejected\"));\n    });\n    i0.ɵɵtext(35, \"Rechazar\");\n    i0.ɵɵelementEnd()()();\n  }\n  if (rf & 2) {\n    const c_r2 = ctx.$implicit;\n    i0.ɵɵadvance(4);\n    i0.ɵɵtextInterpolate1(\" \", c_r2.id, \"\");\n    i0.ɵɵadvance(4);\n    i0.ɵɵtextInterpolate1(\" \", c_r2.locale_id, \"\");\n    i0.ɵɵadvance(4);\n    i0.ɵɵtextInterpolate1(\" \", c_r2.user_id, \"\");\n    i0.ɵɵadvance(4);\n    i0.ɵɵtextInterpolate1(\" \", i0.ɵɵpipeBind2(17, 6, c_r2.start_dt, \"short\"), \"\");\n    i0.ɵɵadvance(5);\n    i0.ɵɵtextInterpolate1(\" \", i0.ɵɵpipeBind2(22, 9, c_r2.end_dt, \"short\"), \"\");\n    i0.ɵɵadvance(5);\n    i0.ɵɵtextInterpolate1(\" \", c_r2.motive, \"\");\n  }\n}\nexport class AdminDashboardComponent {\n  constructor() {\n    this.adminSvc = inject(AdminService);\n    this.conflicts = [];\n  }\n  ngOnInit() {\n    this.loadConflicts();\n  }\n  loadConflicts() {\n    this.adminSvc.getConflicts().subscribe(data => this.conflicts = data);\n  }\n  resolve(reservationId, priority, status) {\n    this.adminSvc.resolve(reservationId, priority, status).subscribe(() => {\n      alert('Resolución guardada');\n      this.loadConflicts();\n    });\n  }\n  logout() {\n    localStorage.removeItem('token');\n    window.location.href = '/login';\n  }\n  static {\n    this.ɵfac = function AdminDashboardComponent_Factory(t) {\n      return new (t || AdminDashboardComponent)();\n    };\n  }\n  static {\n    this.ɵcmp = /*@__PURE__*/i0.ɵɵdefineComponent({\n      type: AdminDashboardComponent,\n      selectors: [[\"app-admin-dashboard\"]],\n      standalone: true,\n      features: [i0.ɵɵStandaloneFeature],\n      decls: 9,\n      vars: 1,\n      consts: [[\"prio\", \"\"], [3, \"click\"], [\"class\", \"conflict-card\", 4, \"ngFor\", \"ngForOf\"], [1, \"conflict-card\"], [\"type\", \"number\", \"min\", \"1\", \"max\", \"9\", \"value\", \"5\"], [1, \"actions\"]],\n      template: function AdminDashboardComponent_Template(rf, ctx) {\n        if (rf & 1) {\n          i0.ɵɵelementStart(0, \"header\")(1, \"h1\");\n          i0.ɵɵtext(2, \"Panel de Administrador\");\n          i0.ɵɵelementEnd();\n          i0.ɵɵelementStart(3, \"button\", 1);\n          i0.ɵɵlistener(\"click\", function AdminDashboardComponent_Template_button_click_3_listener() {\n            return ctx.logout();\n          });\n          i0.ɵɵtext(4, \"Cerrar sesi\\u00F3n\");\n          i0.ɵɵelementEnd()();\n          i0.ɵɵelementStart(5, \"section\")(6, \"h2\");\n          i0.ɵɵtext(7, \"Conflictos por solapamiento\");\n          i0.ɵɵelementEnd();\n          i0.ɵɵtemplate(8, AdminDashboardComponent_div_8_Template, 36, 12, \"div\", 2);\n          i0.ɵɵelementEnd();\n        }\n        if (rf & 2) {\n          i0.ɵɵadvance(8);\n          i0.ɵɵproperty(\"ngForOf\", ctx.conflicts);\n        }\n      },\n      dependencies: [CommonModule, i1.NgForOf, i1.DatePipe],\n      styles: [\"header[_ngcontent-%COMP%] {\\ndisplay: flex;\\njustify-content: space-between;\\nalign-items: center;\\npadding: 10px 20px;\\nbackground: #f5f5f5;\\n}\\n.conflict-card[_ngcontent-%COMP%] {\\nborder: 1px solid #ddd;\\nborder-radius: 6px;\\npadding: 12px;\\nmargin: 10px 0;\\n}\\n.actions[_ngcontent-%COMP%]   button[_ngcontent-%COMP%] {\\nmargin-right: 8px;\\npadding: 6px 12px;\\n}\\n/*# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8uL3NyYy9hcHAvY29tcG9uZW50cy9hZG1pbi1kYXNoYm9hcmQvYWRtaW4tZGFzaGJvYXJkLmNvbXBvbmVudC5jc3MiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IkFBQUE7QUFDQSxhQUFhO0FBQ2IsOEJBQThCO0FBQzlCLG1CQUFtQjtBQUNuQixrQkFBa0I7QUFDbEIsbUJBQW1CO0FBQ25CO0FBQ0E7QUFDQSxzQkFBc0I7QUFDdEIsa0JBQWtCO0FBQ2xCLGFBQWE7QUFDYixjQUFjO0FBQ2Q7QUFDQTtBQUNBLGlCQUFpQjtBQUNqQixpQkFBaUI7QUFDakIiLCJzb3VyY2VzQ29udGVudCI6WyJoZWFkZXIge1xyXG5kaXNwbGF5OiBmbGV4O1xyXG5qdXN0aWZ5LWNvbnRlbnQ6IHNwYWNlLWJldHdlZW47XHJcbmFsaWduLWl0ZW1zOiBjZW50ZXI7XHJcbnBhZGRpbmc6IDEwcHggMjBweDtcclxuYmFja2dyb3VuZDogI2Y1ZjVmNTtcclxufVxyXG4uY29uZmxpY3QtY2FyZCB7XHJcbmJvcmRlcjogMXB4IHNvbGlkICNkZGQ7XHJcbmJvcmRlci1yYWRpdXM6IDZweDtcclxucGFkZGluZzogMTJweDtcclxubWFyZ2luOiAxMHB4IDA7XHJcbn1cclxuLmFjdGlvbnMgYnV0dG9uIHtcclxubWFyZ2luLXJpZ2h0OiA4cHg7XHJcbnBhZGRpbmc6IDZweCAxMnB4O1xyXG59Il0sInNvdXJjZVJvb3QiOiIifQ== */\"]\n    });\n  }\n}","map":{"version":3,"names":["inject","CommonModule","AdminService","i0","ɵɵelementStart","ɵɵtext","ɵɵelementEnd","ɵɵelement","ɵɵlistener","AdminDashboardComponent_div_8_Template_button_click_32_listener","c_r2","ɵɵrestoreView","_r1","$implicit","prio_r3","ɵɵreference","ctx_r3","ɵɵnextContext","ɵɵresetView","resolve","id","value","AdminDashboardComponent_div_8_Template_button_click_34_listener","ɵɵadvance","ɵɵtextInterpolate1","locale_id","user_id","ɵɵpipeBind2","start_dt","end_dt","motive","AdminDashboardComponent","constructor","adminSvc","conflicts","ngOnInit","loadConflicts","getConflicts","subscribe","data","reservationId","priority","status","alert","logout","localStorage","removeItem","window","location","href","selectors","standalone","features","ɵɵStandaloneFeature","decls","vars","consts","template","AdminDashboardComponent_Template","rf","ctx","AdminDashboardComponent_Template_button_click_3_listener","ɵɵtemplate","AdminDashboardComponent_div_8_Template","ɵɵproperty","i1","NgForOf","DatePipe","styles"],"sources":["D:\\Sistema de Reserva de Locales\\reserva-locales\\frontend\\src\\app\\components\\admin-dashboard\\admin-dashboard.component.ts","D:\\Sistema de Reserva de Locales\\reserva-locales\\frontend\\src\\app\\components\\admin-dashboard\\admin-dashboard.component.html"],"sourcesContent":["import { Component, inject, OnInit } from '@angular/core';\r\nimport { CommonModule } from '@angular/common';\r\nimport { AdminService } from '../../services/admin.service';\r\n@Component({\r\n    selector: 'app-admin-dashboard',\r\n    standalone: true,\r\n    imports: [CommonModule],\r\n    templateUrl: './admin-dashboard.component.html',\r\n    styleUrls: ['./admin-dashboard.component.css']\r\n})\r\nexport class AdminDashboardComponent implements OnInit {\r\n    adminSvc = inject(AdminService);\r\n    conflicts: any[] = [];\r\n    ngOnInit() {\r\n        this.loadConflicts();\r\n    }\r\n    loadConflicts() {\r\n        this.adminSvc.getConflicts().subscribe(data => this.conflicts = data);\r\n    }\r\n    resolve(reservationId: string, priority: number, status: 'approved' | 'rejected') {\r\n        this.adminSvc.resolve(reservationId, priority, status).subscribe(() => {\r\n        alert('Resolución guardada');\r\n        this.loadConflicts();\r\n    });\r\n    }\r\n    logout() {\r\n        localStorage.removeItem('token');\r\n        window.location.href = '/login';\r\n    }\r\n}","<header>\r\n  <h1>Panel de Administrador</h1>\r\n  <button (click)=\"logout()\">Cerrar sesión</button>\r\n</header>\r\n<section>\r\n  <h2>Conflictos por solapamiento</h2>\r\n  <div *ngFor=\"let c of conflicts\" class=\"conflict-card\">\r\n    <p><strong>Reserva:</strong> {{ c.id }}</p>\r\n    <p><strong>Local:</strong> {{ c.locale_id }}</p>\r\n    <p><strong>Usuario:</strong> {{ c.user_id }}</p>\r\n    <p><strong>Inicio:</strong> {{ c.start_dt | date:'short' }}</p>\r\n    <p><strong>Fin:</strong> {{ c.end_dt | date:'short' }}</p>\r\n    <p><strong>Motivo:</strong> {{ c.motive }}</p>\r\n    <label>\r\n      Prioridad (1=alta, 9=baja):\r\n      <input type=\"number\" min=\"1\" max=\"9\" #prio value=\"5\">\r\n    </label>\r\n    <div class=\"actions\">\r\n      <button (click)=\"resolve(c.id, prio.value, 'approved')\">Aprobar</button>\r\n      <button (click)=\"resolve(c.id, prio.value, 'rejected')\">Rechazar</button>\r\n    </div>\r\n  </div>\r\n</section>"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}